<source>
  @type  forward
  @id    input1
  port   24224
</source>

<source>
  type tcp
  port 24225
  format json
  tag system
</source>

<match system>
  type record_reformer
  renew_record false
  enable_ruby false
  remove_keys __CURSOR,__REALTIME_TIMESTAMP,__MONOTONIC_TIMESTAMP,_BOOT_ID,_UID,_GID,_CAP_EFFECTIVE,_SELINUX_CONTEXT,_SYSTEMD_SLICE,SYSLOG_IDENTIFIER,_SYSTEMD_CGROUP,_CMDLINE,_SOURCE_REALTIME_TIMESTAMP,_COMM,_HOSTNAME,MESSAGE,MESSAGE_ID,CODE_FILE,CODE_LINE,CODE_FUNCTION
  tag system.clean
  <record>
    message ${MESSAGE}
    hostname ${_HOSTNAME}
  </record>
</match>

<match *.**>
  type copy
  <store>
    type elasticsearch
    host $ELASTICSEARCH_HOST
    port $ELASTICSEARCH_PORT
    include_tag_key true
    tag_key @log_name
    logstash_format true
    flush_interval 10s
  </store>
</match>

